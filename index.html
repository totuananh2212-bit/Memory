<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Website Xanh Đen</title>
  <style>
    body {
      background-color: #0a1a1a;
      color: #e0ffe0;
      font-family: Arial, sans-serif;
      background-image: url('https://www.transparenttextures.com/patterns/green-dust-and-scratches.png');
    }
    header {
      text-align: center;
      padding: 20px;
      background-color: #002222;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      background-color: #003333;
      padding: 10px;
    }
    nav button {
      padding: 10px 20px;
      background: #004444;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 6px;
    }
    nav button:hover {
      background: #006666;
    }
    section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .card {
      background: #001111;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 0 10px rgba(0,255,0,0.2);
    }
    input, textarea {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      border: none;
    }
    .actions button {
      margin-right: 10px;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .like { background: #008800; color: #fff; }
    .dislike { background: #880000; color: #fff; }
    .love { background: #cc00cc; color: #fff; }
    .delete { background: #444; color: #fff; }
    .comment-box { margin-top: 10px; }
    .comment { background: #002222; padding: 5px; border-radius: 5px; margin-top: 5px; }
  </style>
</head>
<body>
  <header>
    <h1 id="siteTitle">🌿 Website Xanh Đen 🌿</h1>
  </header>
  <nav>
    <button onclick="showSection('media')">Ảnh & Video</button>
    <button onclick="showSection('stories')">Câu chuyện</button>
    <button onclick="showSection('info')">Thông tin</button>
    <button onclick="showSection('rating')">Đánh giá</button>
    <button onclick="loginSettings()">Cài đặt</button>
  </nav>

  <!-- Mục 1 -->
  <section id="media" class="active">
    <h2>📷 Ảnh & Video</h2>
    <input type="file" id="mediaFile" accept="image/*,video/*"><br>
    <textarea id="mediaDesc" placeholder="Mô tả..."></textarea>
    <button onclick="addMedia()">Đăng</button>
    <div id="mediaList"></div>
  </section>

  <!-- Mục 2 -->
  <section id="stories">
    <h2>📖 Câu chuyện</h2>
    <textarea id="storyText" placeholder="Viết câu chuyện..."></textarea><br>
    <input type="file" id="storyImg" accept="image/*"><br>
    <button onclick="addStory()">Đăng</button>
    <div id="storyList"></div>
  </section>

  <!-- Mục 3 -->
  <section id="info">
    <h2>📌 Thông tin cá nhân</h2>
    <input id="name" placeholder="Họ tên">
    <input id="phone" placeholder="Số điện thoại">
    <input id="gmail" placeholder="Gmail">
    <button onclick="saveInfo()">Lưu</button>
  </section>

  <!-- Mục 4 -->
  <section id="rating">
    <h2>⭐ Đánh giá Website</h2>
    <select id="stars">
      <option value="1">⭐</option>
      <option value="2">⭐⭐</option>
      <option value="3">⭐⭐⭐</option>
      <option value="4">⭐⭐⭐⭐</option>
      <option value="5">⭐⭐⭐⭐⭐</option>
    </select><br>
    <textarea id="ratingComment" placeholder="Nhận xét..."></textarea><br>
    <input type="file" id="ratingImg" accept="image/*"><br>
    <button onclick="addRating()">Gửi</button>
    <div id="ratingList"></div>
  </section>

  <!-- Cài đặt -->
  <section id="settings">
    <h2>⚙️ Cài đặt</h2>
    <input type="text" id="newTitle" placeholder="Tên website mới">
    <button onclick="changeTitle()">Đổi tên</button><br><br>
    <input type="file" id="bgFile" accept="image/*">
    <button onclick="changeBackground()">Đổi nền</button>
  </section>

  <script>
    function showSection(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function loginSettings() {
      let user = prompt("Nhập tài khoản:");
      let pass = prompt("Nhập mật khẩu:");
      if (user === "Toanh2212" && pass === "22012000") {
        showSection("settings");
      } else {
        alert("Sai tài khoản hoặc mật khẩu!");
      }
    }

    // ================== MỤC 1 ==================
    function addMedia() {
      let file = document.getElementById("mediaFile").files[0];
      let desc = document.getElementById("mediaDesc").value;
      if (!file) return;
      let reader = new FileReader();
      reader.onload = function(e) {
        let media = { type: file.type.startsWith("video") ? "video" : "img", src: e.target.result, desc, comments: [], likes:0, dislikes:0, loves:0 };
        let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
        mediaList.push(media);
        localStorage.setItem("mediaList", JSON.stringify(mediaList));
        renderMedia();
      };
      reader.readAsDataURL(file);
    }

    function renderMedia() {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      let container = document.getElementById("mediaList");
      container.innerHTML = "";
      mediaList.forEach((m, i) => {
        let card = document.createElement("div");
        card.className = "card";
        if (m.type === "img") {
          card.innerHTML = `<img src="${m.src}" width="200"><p>${m.desc}</p>`;
        } else {
          card.innerHTML = `<video src="${m.src}" width="200" controls></video><p>${m.desc}</p>`;
        }
        card.innerHTML += `
          <div class="actions">
            <button class="like" onclick="likeMedia(${i})">👍 ${m.likes}</button>
            <button class="dislike" onclick="dislikeMedia(${i})">👎 ${m.dislikes}</button>
            <button class="love" onclick="loveMedia(${i})">❤️ ${m.loves}</button>
            <button class="delete" onclick="deleteMedia(${i})">🗑️</button>
          </div>
          <div class="comment-box">
            <input id="comment${i}" placeholder="Bình luận...">
            <button onclick="addMediaComment(${i})">Gửi</button>
            <div id="comments${i}"></div>
          </div>
        `;
        container.appendChild(card);
        renderMediaComments(i);
      });
    }

    function likeMedia(i) { updateMediaReaction(i,"likes"); }
    function dislikeMedia(i) { updateMediaReaction(i,"dislikes"); }
    function loveMedia(i) { updateMediaReaction(i,"loves"); }

    function updateMediaReaction(i, type) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i][type]++;
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMedia();
    }

    function deleteMedia(i) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList.splice(i,1);
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMedia();
    }

    function addMediaComment(i) {
      let cmt = document.getElementById("comment"+i).value;
      if (!cmt) return;
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments.push({text:cmt,likes:0,dislikes:0,loves:0});
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    function renderMediaComments(i) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      let container = document.getElementById("comments"+i);
      container.innerHTML = "";
      mediaList[i].comments.forEach((c,j)=>{
        let div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `
          ${c.text}
          <button class="like" onclick="mediaCommentReaction(${i},${j},'likes')">👍 ${c.likes}</button>
          <button class="dislike" onclick="mediaCommentReaction(${i},${j},'dislikes')">👎 ${c.dislikes}</button>
          <button class="love" onclick="mediaCommentReaction(${i},${j},'loves')">❤️ ${c.loves}</button>
          <button class="delete" onclick="deleteMediaComment(${i},${j})">🗑️</button>
        `;
        container.appendChild(div);
      });
    }

    function mediaCommentReaction(i,j,type){
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments[j][type]++;
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    function deleteMediaComment(i,j){
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments.splice(j,1);
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    // ================== LOAD LẠI ==================
    window.onload = () => {
      renderMedia();
    }
  </script>
</body>
</html>

