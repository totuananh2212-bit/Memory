<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Website của Wol</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0d1b1e;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
      background-image: url('https://www.transparenttextures.com/patterns/green-fibers.png');
    }
    header {
      background: #0a1416;
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #9fe870;
    }
    nav {
      display: flex;
      justify-content: center;
      background: #123;
      padding: 10px;
    }
    nav button {
      margin: 5px;
      padding: 10px 15px;
      background: #1e2f2f;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    nav button:hover {
      background: #355;
    }
    section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .post, .story, .review {
      border: 1px solid #355;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      background: #1a2a2a;
    }
    .comment {
      margin-left: 20px;
      font-size: 14px;
    }
    .actions button {
      margin-right: 5px;
    }
    #notification {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #355;
      padding: 10px;
      border-radius: 5px;
      display: none;
    }
  </style>
</head>
<body>
  <header id="siteTitle">🌿 Website của Wol 🌿</header>
  <nav>
    <button onclick="showSection('upload')">Mục 1: Ảnh & Video</button>
    <button onclick="showSection('story')">Mục 2: Câu chuyện</button>
    <button onclick="showSection('info')">Mục 3: Thông tin</button>
    <button onclick="showSection('review')">Mục 4: Đánh giá</button>
    <button onclick="showSection('settings')">⚙️ Cài đặt</button>
  </nav>

  <!-- Thông báo -->
  <div id="notification"></div>

  <!-- Mục 1: Upload ảnh/video -->
  <section id="upload" class="active">
    <h2>Đăng ảnh hoặc video</h2>
    <input type="file" id="mediaFile" accept="image/*,video/*"><br><br>
    <textarea id="mediaDesc" placeholder="Mô tả..."></textarea><br>
    <button onclick="addPost()">Đăng</button>
    <div id="postList"></div>
  </section>

  <!-- Mục 2: Viết câu chuyện -->
  <section id="story">
    <h2>Viết câu chuyện</h2>
    <textarea id="storyText" placeholder="Câu chuyện..."></textarea><br>
    <input type="file" id="storyImage" accept="image/*"><br>
    <button onclick="addStory()">Đăng</button>
    <div id="storyList"></div>
  </section>

  <!-- Mục 3: Thông tin -->
  <section id="info">
    <h2>Thông tin cá nhân</h2>
    <input id="name" placeholder="Họ tên"><br>
    <input id="phone" placeholder="Số điện thoại"><br>
    <input id="email" placeholder="Email"><br>
    <button onclick="saveInfo()">Lưu</button>
    <div id="savedInfo"></div>
  </section>

  <!-- Mục 4: Đánh giá -->
  <section id="review">
    <h2>Đánh giá website</h2>
    <select id="rating">
      <option value="1">⭐</option>
      <option value="2">⭐⭐</option>
      <option value="3">⭐⭐⭐</option>
      <option value="4">⭐⭐⭐⭐</option>
      <option value="5">⭐⭐⭐⭐⭐</option>
    </select><br>
    <textarea id="reviewText" placeholder="Bình luận..."></textarea><br>
    <input type="file" id="reviewImage" accept="image/*"><br>
    <button onclick="addReview()">Đăng</button>
    <div id="reviewList"></div>
  </section>

  <!-- Cài đặt -->
  <section id="settings">
    <h2>Đăng nhập để vào Cài đặt</h2>
    <input type="text" id="user" placeholder="Tài khoản"><br>
    <input type="password" id="pass" placeholder="Mật khẩu"><br>
    <button onclick="login()">Đăng nhập</button>

    <div id="settingsPanel" style="display:none;">
      <h3>Cài đặt Website</h3>
      <input type="text" id="newTitle" placeholder="Tên mới của website">
      <button onclick="changeTitle()">Đổi tên</button><br><br>
      <input type="file" id="bgFile" accept="image/*">
      <button onclick="changeBackground()">Đổi nền</button><br><br>
      <button onclick="exportData()">📤 Xuất JSON</button>
      <input type="file" id="importFile" accept=".json" onchange="importData(event)">
    </div>
  </section>

  <script>
    let data = JSON.parse(localStorage.getItem("websiteData") || '{"posts":[],"stories":[],"info":{},"reviews":[]}');

    function saveData() {
      localStorage.setItem("websiteData", JSON.stringify(data));
    }

    function notify(msg) {
      let n = document.getElementById("notification");
      n.innerText = msg;
      n.style.display = "block";
      setTimeout(()=>n.style.display="none",2000);
    }

    function showSection(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function addPost() {
      let file = document.getElementById("mediaFile").files[0];
      let desc = document.getElementById("mediaDesc").value;
      if (!file) { notify("Hãy chọn file"); return; }
      let reader = new FileReader();
      reader.onload = function(e) {
        data.posts.push({file:e.target.result, desc, likes:0, dislikes:0, comments:[]});
        saveData(); renderPosts(); notify("Đã đăng");
      }
      reader.readAsDataURL(file);
    }

    function renderPosts() {
      let list = document.getElementById("postList"); list.innerHTML="";
      data.posts.forEach((p,i)=>{
        let div=document.createElement("div"); div.className="post";
        div.innerHTML = `
          ${p.file.startsWith("data:image") ? `<img src="${p.file}" width="200">` : `<video src="${p.file}" width="200" controls></video>`}
          <p>${p.desc}</p>
          <div class="actions">
            <button onclick="likePost(${i})">👍 ${p.likes}</button>
            <button onclick="dislikePost(${i})">👎 ${p.dislikes}</button>
            <button onclick="deletePost(${i})">❌ Xóa</button>
          </div>
          <div>
            <input placeholder="Tên" id="cname${i}">
            <input placeholder="Bình luận" id="cmt${i}">
            <button onclick="addComment(${i})">Bình luận</button>
          </div>
          <div id="comments${i}"></div>
        `;
        list.appendChild(div);
        renderComments(i);
      });
    }

    function likePost(i){data.posts[i].likes++;saveData();renderPosts();}
    function dislikePost(i){data.posts[i].dislikes++;saveData();renderPosts();}
    function deletePost(i){data.posts.splice(i,1);saveData();renderPosts();}
    function addComment(i){
      let name=document.getElementById("cname"+i).value||"Ẩn danh";
      let text=document.getElementById("cmt"+i).value;
      if(!text)return;
      data.posts[i].comments.push({name,text});
      saveData();renderComments(i);
    }
    function renderComments(i){
      let cdiv=document.getElementById("comments"+i); cdiv.innerHTML="";
      data.posts[i].comments.forEach((c,j)=>{
        cdiv.innerHTML+=`<div class="comment"><b>${c.name}:</b> ${c.text} <button onclick="delComment(${i},${j})">Xóa</button></div>`;
      });
    }
    function delComment(i,j){data.posts[i].comments.splice(j,1);saveData();renderComments(i);}

    function addStory(){ /* tương tự như trước */ }
    function renderStories(){ /* tương tự */ }
    function saveInfo(){ /* tương tự */ }
    function renderInfo(){ /* tương tự */ }
    function addReview(){ /* tương tự */ }
    function renderReviews(){ /* tương tự */ }

    // Đăng nhập
    function login(){
      let u=document.getElementById("user").value;
      let p=document.getElementById("pass").value;
      if(u==="Toanh2212" && p==="22012000"){
        document.getElementById("settingsPanel").style.display="block";
        notify("Đăng nhập thành công");
      } else notify("Sai tài khoản/mật khẩu");
    }

    function changeTitle(){
      let t=document.getElementById("newTitle").value;
      if(t){document.getElementById("siteTitle").innerText=t;}
    }

    function changeBackground(){
      let f=document.getElementById("bgFile").files[0];
      if(!f)return;
      let r=new FileReader();
      r.onload=e=>{
        document.body.style.backgroundImage=`url(${e.target.result})`;
      };
      r.readAsDataURL(f);
    }

    // Xuất JSON
    function exportData(){
      let blob=new Blob([JSON.stringify(data)],{type:"application/json"});
      let a=document.createElement("a");
      a.href=URL.createObjectURL(blob);
      a.download="backup.json";
      a.click();
    }

    // Nhập JSON
    function importData(e){
      let f=e.target.files[0];
      if(!f)return;
      let r=new FileReader();
      r.onload=ev=>{
        try{
          data=JSON.parse(ev.target.result);
          saveData();
          renderPosts(); // gọi lại các render khác
          notify("Khôi phục thành công");
        }catch(err){notify("File không hợp lệ");}
      }
      r.readAsText(f);
    }

    // Khởi tạo
    renderPosts();
  </script>
</body>
</html>




