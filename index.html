<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Motor Jump Game</title>
<style>
body{margin:0;background:#87CEEB;overflow:hidden;}
canvas{display:block;margin:0 auto;background:#4CAF50;}
#score{position:absolute;top:10px;left:50%;transform:translateX(-50%);color:#fff;font-size:24px;font-family:sans-serif;}
</style>
</head>
<body>
<div id="score">Điểm: 0</div>
<canvas id="gameCanvas" width="800" height="400"></canvas>
<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");

let score=0;
let speed=5;
let obstacles=[];
let waterholes=[];
let monsters=[];
let gravity=0.6;

let motor={x:50,y:300,width:40,height:40,vy:0,jumping:false,color:"red"};

function drawMotor(){
    ctx.fillStyle=motor.color;
    ctx.fillRect(motor.x,motor.y,motor.width,motor.height);
}

function drawGround(){
    ctx.fillStyle="#654321";
    ctx.fillRect(0,350,canvas.width,50); // đất
    ctx.fillStyle="#a0a0a0";
    ctx.fillRect(0,360,canvas.width,10); // đường lộ
}

function drawObstacles(){
    ctx.fillStyle="gray";
    obstacles.forEach(o=>ctx.fillRect(o.x,o.y,o.width,o.height));
}
function drawWaterholes(){
    ctx.fillStyle="blue";
    waterholes.forEach(w=>ctx.fillRect(w.x,w.y,w.width,w.height));
}
function drawMonsters(){
    ctx.fillStyle="purple";
    monsters.forEach(m=>ctx.fillRect(m.x,m.y,m.width,m.height));
}

// tạo obstacle
function createObstacle(){
    obstacles.push({x:canvas.width,y:310,width:30,height:40});
}
function createWaterhole(){
    waterholes.push({x:canvas.width,y:350,width:50,height:50});
}
function createMonster(){
    monsters.push({x:canvas.width,y:300,width:40,height:50});
}

// cập nhật vật thể
function updateObstacles(){
    obstacles.forEach(o=>o.x-=speed);
    obstacles=obstacles.filter(o=>o.x+o.width>0);
}
function updateWaterholes(){
    waterholes.forEach(w=>w.x-=speed);
    waterholes=waterholes.filter(w=>w.x+w.width>0);
}
function updateMonsters(){
    monsters.forEach(m=>m.x-=speed);
    monsters=monsters.filter(m=>m.x+m.width>0);
}

// va chạm
function checkCollision(){
    let hit=false;
    obstacles.forEach(o=>{
        if(motor.x<motor.x+motor.width && motor.x+motor.width>o.x &&
           motor.y<motor.y+motor.height && motor.y+motor.height>o.y){
            hit=true;
        }
    });
    waterholes.forEach(w=>{
        if(motor.x<motor.x+motor.width && motor.x+motor.width>w.x &&
           motor.y<motor.y+motor.height && motor.y+motor.height>w.y){
            hit=true;
        }
    });
    monsters.forEach(m=>{
        if(motor.x<motor.x+motor.width && motor.x+motor.width>m.x &&
           motor.y<motor.y+motor.height && motor.y+motor.height>m.y){
            hit=true;
        }
    });
    return hit;
}

// nhảy
document.addEventListener("keydown",e=>{
    if(e.code==="Space" && !motor.jumping){
        motor.vy=-12;
        motor.jumping=true;
    }
});

// game loop
let frame=0;
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawGround();
    drawMotor();
    drawObstacles();
    drawWaterholes();
    drawMonsters();

    // gravity
    motor.vy+=gravity;
    motor.y+=motor.vy;
    if(motor.y>310){motor.y=310; motor.vy=0; motor.jumping=false;}

    // tạo vật thể
    if(frame%150===0) createObstacle();
    if(frame%500===0) createWaterhole();
    if(frame%700===0) createMonster();

    // cập nhật vật thể
    updateObstacles();
    updateWaterholes();
    updateMonsters();

    // tính điểm
    score+=0.1;
    document.getElementById("score").innerText="Điểm: "+Math.floor(score);

    // tăng tốc hoặc thêm vật thể khi đạt điểm
    if(Math.floor(score)%100===0 && Math.floor(score)!==0){
        speed+=0.5;
    }

    // check va chạm
    if(checkCollision()){
        alert("Game Over! Điểm: "+Math.floor(score));
        score=0; speed=5; obstacles=[]; waterholes=[]; monsters=[]; motor.y=310; motor.vy=0; motor.jumping=false;
    }

    frame++;
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>



















