<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Website Xanh Äen</title>
  <style>
    body {
      background-color: #0a1a1a;
      color: #e0ffe0;
      font-family: Arial, sans-serif;
      background-image: url('https://www.transparenttextures.com/patterns/green-dust-and-scratches.png');
    }
    header {
      text-align: center;
      padding: 20px;
      background-color: #002222;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      background-color: #003333;
      padding: 10px;
    }
    nav button {
      padding: 10px 20px;
      background: #004444;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 6px;
    }
    nav button:hover {
      background: #006666;
    }
    section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .card {
      background: #001111;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 0 10px rgba(0,255,0,0.2);
    }
    input, textarea {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      border: none;
    }
    .actions button {
      margin-right: 10px;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .like { background: #008800; color: #fff; }
    .dislike { background: #880000; color: #fff; }
    .love { background: #cc00cc; color: #fff; }
    .delete { background: #444; color: #fff; }
    .comment-box { margin-top: 10px; }
    .comment { background: #002222; padding: 5px; border-radius: 5px; margin-top: 5px; }
  </style>
</head>
<body>
  <header>
    <h1 id="siteTitle">ğŸŒ¿ Website Xanh Äen ğŸŒ¿</h1>
  </header>
  <nav>
    <button onclick="showSection('media')">áº¢nh & Video</button>
    <button onclick="showSection('stories')">CÃ¢u chuyá»‡n</button>
    <button onclick="showSection('info')">ThÃ´ng tin</button>
    <button onclick="showSection('rating')">ÄÃ¡nh giÃ¡</button>
    <button onclick="loginSettings()">CÃ i Ä‘áº·t</button>
  </nav>

  <!-- Má»¥c 1 -->
  <section id="media" class="active">
    <h2>ğŸ“· áº¢nh & Video</h2>
    <input type="file" id="mediaFile" accept="image/*,video/*"><br>
    <textarea id="mediaDesc" placeholder="MÃ´ táº£..."></textarea>
    <button onclick="addMedia()">ÄÄƒng</button>
    <div id="mediaList"></div>
  </section>

  <!-- Má»¥c 2 -->
  <section id="stories">
    <h2>ğŸ“– CÃ¢u chuyá»‡n</h2>
    <textarea id="storyText" placeholder="Viáº¿t cÃ¢u chuyá»‡n..."></textarea><br>
    <input type="file" id="storyImg" accept="image/*"><br>
    <button onclick="addStory()">ÄÄƒng</button>
    <div id="storyList"></div>
  </section>

  <!-- Má»¥c 3 -->
  <section id="info">
    <h2>ğŸ“Œ ThÃ´ng tin cÃ¡ nhÃ¢n</h2>
    <input id="name" placeholder="Há» tÃªn">
    <input id="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i">
    <input id="gmail" placeholder="Gmail">
    <button onclick="saveInfo()">LÆ°u</button>
  </section>

  <!-- Má»¥c 4 -->
  <section id="rating">
    <h2>â­ ÄÃ¡nh giÃ¡ Website</h2>
    <select id="stars">
      <option value="1">â­</option>
      <option value="2">â­â­</option>
      <option value="3">â­â­â­</option>
      <option value="4">â­â­â­â­</option>
      <option value="5">â­â­â­â­â­</option>
    </select><br>
    <textarea id="ratingComment" placeholder="Nháº­n xÃ©t..."></textarea><br>
    <input type="file" id="ratingImg" accept="image/*"><br>
    <button onclick="addRating()">Gá»­i</button>
    <div id="ratingList"></div>
  </section>

  <!-- CÃ i Ä‘áº·t -->
  <section id="settings">
    <h2>âš™ï¸ CÃ i Ä‘áº·t</h2>
    <input type="text" id="newTitle" placeholder="TÃªn website má»›i">
    <button onclick="changeTitle()">Äá»•i tÃªn</button><br><br>
    <input type="file" id="bgFile" accept="image/*">
    <button onclick="changeBackground()">Äá»•i ná»n</button>
  </section>

  <script>
    function showSection(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function loginSettings() {
      let user = prompt("Nháº­p tÃ i khoáº£n:");
      let pass = prompt("Nháº­p máº­t kháº©u:");
      if (user === "Toanh2212" && pass === "22012000") {
        showSection("settings");
      } else {
        alert("Sai tÃ i khoáº£n hoáº·c máº­t kháº©u!");
      }
    }

    // ================== Má»¤C 1 ==================
    function addMedia() {
      let file = document.getElementById("mediaFile").files[0];
      let desc = document.getElementById("mediaDesc").value;
      if (!file) return;
      let reader = new FileReader();
      reader.onload = function(e) {
        let media = { type: file.type.startsWith("video") ? "video" : "img", src: e.target.result, desc, comments: [], likes:0, dislikes:0, loves:0 };
        let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
        mediaList.push(media);
        localStorage.setItem("mediaList", JSON.stringify(mediaList));
        renderMedia();
      };
      reader.readAsDataURL(file);
    }

    function renderMedia() {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      let container = document.getElementById("mediaList");
      container.innerHTML = "";
      mediaList.forEach((m, i) => {
        let card = document.createElement("div");
        card.className = "card";
        if (m.type === "img") {
          card.innerHTML = `<img src="${m.src}" width="200"><p>${m.desc}</p>`;
        } else {
          card.innerHTML = `<video src="${m.src}" width="200" controls></video><p>${m.desc}</p>`;
        }
        card.innerHTML += `
          <div class="actions">
            <button class="like" onclick="likeMedia(${i})">ğŸ‘ ${m.likes}</button>
            <button class="dislike" onclick="dislikeMedia(${i})">ğŸ‘ ${m.dislikes}</button>
            <button class="love" onclick="loveMedia(${i})">â¤ï¸ ${m.loves}</button>
            <button class="delete" onclick="deleteMedia(${i})">ğŸ—‘ï¸</button>
          </div>
          <div class="comment-box">
            <input id="comment${i}" placeholder="BÃ¬nh luáº­n...">
            <button onclick="addMediaComment(${i})">Gá»­i</button>
            <div id="comments${i}"></div>
          </div>
        `;
        container.appendChild(card);
        renderMediaComments(i);
      });
    }

    function likeMedia(i) { updateMediaReaction(i,"likes"); }
    function dislikeMedia(i) { updateMediaReaction(i,"dislikes"); }
    function loveMedia(i) { updateMediaReaction(i,"loves"); }

    function updateMediaReaction(i, type) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i][type]++;
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMedia();
    }

    function deleteMedia(i) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList.splice(i,1);
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMedia();
    }

    function addMediaComment(i) {
      let cmt = document.getElementById("comment"+i).value;
      if (!cmt) return;
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments.push({text:cmt,likes:0,dislikes:0,loves:0});
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    function renderMediaComments(i) {
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      let container = document.getElementById("comments"+i);
      container.innerHTML = "";
      mediaList[i].comments.forEach((c,j)=>{
        let div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `
          ${c.text}
          <button class="like" onclick="mediaCommentReaction(${i},${j},'likes')">ğŸ‘ ${c.likes}</button>
          <button class="dislike" onclick="mediaCommentReaction(${i},${j},'dislikes')">ğŸ‘ ${c.dislikes}</button>
          <button class="love" onclick="mediaCommentReaction(${i},${j},'loves')">â¤ï¸ ${c.loves}</button>
          <button class="delete" onclick="deleteMediaComment(${i},${j})">ğŸ—‘ï¸</button>
        `;
        container.appendChild(div);
      });
    }

    function mediaCommentReaction(i,j,type){
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments[j][type]++;
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    function deleteMediaComment(i,j){
      let mediaList = JSON.parse(localStorage.getItem("mediaList") || "[]");
      mediaList[i].comments.splice(j,1);
      localStorage.setItem("mediaList", JSON.stringify(mediaList));
      renderMediaComments(i);
    }

    // ================== LOAD Láº I ==================
    window.onload = () => {
      renderMedia();
    }
  </script>
</body>
</html>

